---
import { ImageDetails, ImageId, Images } from '@/utils/sharedImages';
import { getImage } from '@astrojs/image';
import ImageContentRow, { FullImageDetails } from './ImageContentRow.component'

interface Props {
  direction?: "vertical" | "horizontal"
  images: ImageId[];
}

const imagesProcessed = await Promise.all(Astro.props.images.map(async (image) => {
  // Find relevant image object
  const imageObject = Images.find((imageItem) => imageItem.id === image)
  if (!imageObject) return null

  // Generate an image of the correct size
  return {
    originalObject: imageObject,
    processedObject: await getImage({
      src: imageObject.src,
      alt: imageObject.alt || "",
      aspectRatio: `${imageObject.width}:${imageObject.height}`,
      width: 1500,
      format: "webp"
    })
  } as FullImageDetails
}))
---

<ImageContentRow 
  client:only="react"
  imageItems={imagesProcessed} 
/>